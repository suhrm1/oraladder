<h2>{% block title %}Leaderboard{% endblock %}</h2>

{% block content %}
<div>
	{% if period_info %}
		{% if period_info.id == "2m" %}
		<p>
			The ranking below is the current season leaderboard. This leaderboard
			only takes into account games played within the ongoing 2-month period. At the end of
			each season, rankings get stored and the race for who will be the new champion
			begins again.
		</p>
		{% endif %}
	{% else %}
	<p>
		The <strong>all-time ranking</strong> below contains results from all games
		played across seasons. The ranking indicates who may be the strongest players
		to have competed on the OpenRA ladder servers.
	</p>
	{% endif %}
</div>
<table id="leaderboard-table">
	<thead>
		<tr>
			<th>Rank</th>
			<th>Player</th>
			<th>Rating</th>
			<th>Played</th>
			<th>Wins</th>
			<th>Losses</th>
			<th>Win rate</th>
		</tr>
	</thead>
</table>
<script>
$(document).ready(
	function () {
		$('#leaderboard-table').DataTable({
			ajax: { url: "{{ scoreboard_ajax_url|safe }}", dataSrc:"" },
			pageLength: 25,
			columns: [
				{
					data: 'rank',
					className: 'position',
					render: function (data, type) {
						if (type === "display"){
							if (!data['is_official']) {
								return '<span title="' + data['comment'] + '">' + data['rank'] + '<sup>ðŸ›ˆ</sup></span>';
							}
							return data['rank'];
						}
						return data;
					},
				},
				{ data: 'player', className: 'player_avatar', render: player_render },
				{ data: 'rating', className: 'rating', render: rating_render },
				{ data: 'played' },
				{ data: 'wins' },
				{ data: 'losses' },
				{ data: 'winrate', render: winrate_render },
			],
			"createdRow": function( row, data, dataIndex ) {
				if ( !data['rank']['is_official'] ) {
					$(row).addClass( 'preliminary_ranking' );
				}
			},
			bSort: false,
		});
	}
);
</script>
{% endblock %}
